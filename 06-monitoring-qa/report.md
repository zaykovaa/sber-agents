## RAG-ассистент Сбербанка

Коротко: Telegram-бот с RAG (Retrieval-Augmented Generation) для ответов на вопросы по документам Сбербанка (PDF + готовые Q&A из JSON), поддерживает индексацию, диалог с контекстом и оценку качества через RAGAS.

### Вариант задания
- Базовый

### Используемые модели и провайдеры
- Провайдер (RAG): OpenRouter (сообщено пользователем)
- MODEL: openai/gpt-oss-20b:free
- MODEL_QUERY_TRANSFORM: openai/gpt-oss-20b:free
- EMBEDDING_MODEL: openai/text-embedding-3-large
- Модели для RAGAS evaluation: в коде по умолчанию заданы
  - `RAGAS_LLM_MODEL=gpt-4o`
  - `RAGAS_EMBEDDING_MODEL=text-embedding-3-large`
  - Требуется подтверждение, использовались ли они фактически при запуске

## Создание и загрузка датасета

### Как создавали датасет
- Поддерживаются два источника (см. `src/dataset_synthesizer.py`):
  - Синтез из PDF-чанков с помощью LLM (автоматический синтез)
  - Загрузка готовых Q&A пар из JSON (`data/sberbank_help_documents.json`)
- Текущий файл датасета: `datasets/06-rag-qa-dataset.json`
- Судя по содержимому на момент отчёта, в файле присутствуют пары из JSON (2 примера). Нужна информация, выполнялся ли синтез из PDF и был ли загруз в LangSmith.

### Размер датасета
- Найдено примеров в `datasets/06-rag-qa-dataset.json`: 2
  - Требуется уточнение, если создавался другой/обновлённый датасет или загружалась большая выборка

### Скриншот страницы датасета в LangSmith
- Скриншоты (как предоставлено) находятся в `screenshots/`:
  - [WhatsApp Image 2025-11-16 at 14.06.53.jpeg](screenshots/WhatsApp%20Image%202025-11-16%20at%2014.06.53.jpeg)
  - [WhatsApp Image 2025-11-16 at 14.06.53 (1).jpeg](screenshots/WhatsApp%20Image%202025-11-16%20at%2014.06.53%20(1).jpeg)

### Примеры Q&A пар из датасета
Ниже 2 примера из `datasets/06-rag-qa-dataset.json`:

- Вопрос: «Срок моей карты истёк. Что делать?»
  - Эталонный ответ: «С апреля 2022 года Сбер автоматически продлевает срок действия карт. Продолжайте пользоваться картой как раньше даже после истечения срока, который указан на пластике.»
  - Источник (metadata.source): `sberbank_help_documents.json`

- Вопрос: «На какие операции не действует беспроцентный период?»
  - Эталонный ответ: «Беспроцентный период не действует на: Переводы денег ... Выдачу наличных ... Оплату услуг финансовых учреждений ... Казино ... Ломбарды ... и т.д.»
  - Источник (metadata.source): `sberbank_help_documents.json`

## Оценка качества через RAGAS

### Метрики
- Faithfulness (Обоснованность)
- Answer Relevancy (Релевантность ответа)
- Answer Correctness (Правильность ответа)
- Answer Similarity (Похожесть на эталон)
- Context Recall (Полнота контекста)
- Context Precision (Точность поиска)

## Выводы
- Требуется ваша оценка и инсайты: какие сильные/слабые стороны показала система на вашем датасете? Каковы значения метрик (если запускалась оценка), и где система чаще всего ошибается?

---

Пожалуйста, уточните:
- Фактически использованные модели для RAG (`MODEL`, `MODEL_QUERY_TRANSFORM`, `EMBEDDING_MODEL`) при работе с OpenRouter
- Запускалась ли оценка RAGAS и какие итоговые метрики?

